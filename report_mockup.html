<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CST Analysis Report - Improved Layout</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            padding: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            border-bottom: 3px solid #2196F3;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2196F3;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header .meta {
            color: #666;
            font-size: 14px;
            margin-top: 8px;
        }

        .extraction-space {
            background: #E3F2FD;
            color: #1976D2;
            padding: 8px 16px;
            border-radius: 4px;
            display: inline-block;
            font-weight: 600;
            margin-top: 8px;
        }

        .section {
            margin-bottom: 35px;
        }

        .section-title {
            color: #1976D2;
            font-size: 22px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #E3F2FD;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .acquisition-box {
            background: #F5F5F5;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }

        .acquisition-box h3 {
            color: #1976D2;
            font-size: 16px;
            margin-bottom: 12px;
        }

        .acquisition-box .param-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #E0E0E0;
        }

        .acquisition-box .param-row:last-child {
            border-bottom: none;
        }

        .param-label {
            color: #666;
            font-weight: 500;
        }

        .param-value {
            color: #333;
            font-family: 'Courier New', monospace;
        }

        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .metrics-table thead {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        .metrics-table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 15px;
        }

        .metrics-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #E0E0E0;
        }

        .metrics-table tbody tr:last-child td {
            border-bottom: none;
        }

        .metrics-table tbody tr:hover {
            background: #F5F5F5;
        }

        .li-positive {
            color: #E53935;
            font-weight: 600;
        }

        .li-negative {
            color: #1E88E5;
            font-weight: 600;
        }

        .li-legend {
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: #FAFAFA;
            border-radius: 4px;
            font-size: 13px;
        }

        .li-legend span {
            margin: 0 15px;
        }

        .qc-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .qc-pass {
            background: #C8E6C9;
            color: #2E7D32;
        }

        .qc-warn {
            background: #FFE0B2;
            color: #E65100;
        }

        .viz-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 20px;
        }

        .viz-item {
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }

        .viz-item h3 {
            color: #1976D2;
            font-size: 16px;
            margin-bottom: 12px;
            text-align: center;
        }

        .viz-placeholder {
            background: #F5F5F5;
            height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            color: #999;
            font-style: italic;
            border: 2px dashed #CCC;
        }

        .profile-plots {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .profile-plot {
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }

        .profile-plot h4 {
            color: #1976D2;
            font-size: 14px;
            margin-bottom: 10px;
            text-align: center;
        }

        .plot-placeholder {
            background: #F5F5F5;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            color: #999;
            font-style: italic;
            border: 2px dashed #CCC;
        }

        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #E0E0E0;
            text-align: center;
            color: #666;
            font-size: 13px;
        }

        .stats-highlight {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            font-size: 13px;
            color: #666;
        }

        .tractogram-large {
            grid-column: 1 / -1;
        }

        .tractogram-large .viz-placeholder {
            height: 450px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div class="header">
        <h1>Corticospinal Tract Analysis Report</h1>
        <div class="meta">
            <strong>Subject:</strong> sub_sca201_ses01 |
            <strong>Analysis Date:</strong> 2026-01-16 |
            <strong>csttool:</strong> v0.1.0
        </div>
        <div class="extraction-space">Metrics Extracted In: Native Space</div>
    </div>

    <!-- Acquisition Parameters & QC -->
    <div class="section">
        <div class="two-column">
            <div class="acquisition-box">
                <h3>üìä Acquisition Parameters</h3>
                <div class="param-row">
                    <span class="param-label">Protocol:</span>
                    <span class="param-value">Single-shell DTI</span>
                </div>
                <div class="param-row">
                    <span class="param-label">b-value:</span>
                    <span class="param-value">1000 s/mm¬≤</span>
                </div>
                <div class="param-row">
                    <span class="param-label">Directions:</span>
                    <span class="param-value">64</span>
                </div>
                <div class="param-row">
                    <span class="param-label">Resolution:</span>
                    <span class="param-value">2.0 √ó 2.0 √ó 2.0 mm¬≥</span>
                </div>
            </div>

            <div class="acquisition-box">
                <h3>‚öôÔ∏è Processing Parameters</h3>
                <div class="param-row">
                    <span class="param-label">Denoising:</span>
                    <span class="param-value">nlmeans</span>
                </div>
                <div class="param-row">
                    <span class="param-label">Tracking Method:</span>
                    <span class="param-value">Deterministic (DTI)</span>
                </div>
                <div class="param-row">
                    <span class="param-label">ROI Approach:</span>
                    <span class="param-value">Atlas-to-Subject (HO)</span>
                </div>
                <div class="param-row">
                    <span class="param-label">Whole-brain Streamlines:</span>
                    <span class="param-value">498,432</span>
                </div>
            </div>
        </div>

        <div class="stats-highlight">
            <strong>CST Selection:</strong> 309 of 498,432 streamlines (0.062%) |
            <strong>Extraction Efficiency:</strong> 144 left + 165 right = 309 bilateral CST streamlines
        </div>
    </div>

    <!-- Summary Metrics -->
    <div class="section">
        <h2 class="section-title">üìà Summary Metrics</h2>

        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <span class="qc-badge qc-pass">‚úì Streamline Count: Normal</span>
            <span class="qc-badge qc-pass">‚úì Registration: Good</span>
            <span class="qc-badge qc-warn">‚ö† Asymmetry: Borderline</span>
        </div>

        <div style="background: #FAFAFA; padding: 15px; border-radius: 4px; margin-bottom: 15px; font-size: 13px;">
            <strong>QC Criteria:</strong>
            <ul style="margin: 8px 0 0 20px; line-height: 1.8;">
                <li><strong>Streamline Count:</strong> Both hemispheres &gt; 100 streamlines ‚Üí PASS (Left: 144, Right:
                    165)</li>
                <li><strong>Registration Quality:</strong> Dice coefficient &gt; 0.85 ‚Üí PASS (Dice: 0.92)</li>
                <li><strong>Asymmetry Assessment:</strong> |LI| &lt; 0.05 = Balanced, 0.05-0.10 = Borderline, &gt; 0.10
                    = Notable ‚Üí Max |LI| = 0.068 (RD)</li>
            </ul>
        </div>

        <table class="metrics-table">
            <thead>
                <tr>
                    <th style="width: 30%;">Metric</th>
                    <th style="width: 20%; text-align: center;">Left Hemisphere</th>
                    <th style="width: 20%; text-align: center;">Right Hemisphere</th>
                    <th style="width: 15%; text-align: center;">Laterality Index</th>
                    <th style="width: 15%; text-align: center;">Interpretation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Streamlines</strong></td>
                    <td style="text-align: center;">144</td>
                    <td style="text-align: center;">165</td>
                    <td style="text-align: center;" class="li-negative">-0.068</td>
                    <td style="text-align: center; font-size: 12px;">Right &gt; Left</td>
                </tr>
                <tr>
                    <td><strong>Volume</strong> (cm¬≥)</td>
                    <td style="text-align: center;">13.30</td>
                    <td style="text-align: center;">14.48</td>
                    <td style="text-align: center;" class="li-negative">-0.043</td>
                    <td style="text-align: center; font-size: 12px;">Balanced</td>
                </tr>
                <tr>
                    <td><strong>Mean Length</strong> (mm)</td>
                    <td style="text-align: center;">107.5</td>
                    <td style="text-align: center;">118.6</td>
                    <td style="text-align: center;" class="li-negative">-0.049</td>
                    <td style="text-align: center; font-size: 12px;">Right &gt; Left</td>
                </tr>
                <tr style="background: #FAFAFA;">
                    <td><strong>Fractional Anisotropy (FA)</strong></td>
                    <td style="text-align: center;">0.480</td>
                    <td style="text-align: center;">0.511</td>
                    <td style="text-align: center;" class="li-negative">-0.031</td>
                    <td style="text-align: center; font-size: 12px;">Balanced</td>
                </tr>
                <tr style="background: #FAFAFA;">
                    <td><strong>Mean Diffusivity (MD)</strong> (√ó10‚Åª¬≥ mm¬≤/s)</td>
                    <td style="text-align: center;">0.95</td>
                    <td style="text-align: center;">0.87</td>
                    <td style="text-align: center;" class="li-positive">+0.044</td>
                    <td style="text-align: center; font-size: 12px;">Left &gt; Right</td>
                </tr>
                <tr style="background: #FAFAFA;">
                    <td><strong>Radial Diffusivity (RD)</strong> (√ó10‚Åª¬≥ mm¬≤/s)</td>
                    <td style="text-align: center;">0.68</td>
                    <td style="text-align: center;">0.61</td>
                    <td style="text-align: center;" class="li-positive">+0.058</td>
                    <td style="text-align: center; font-size: 12px;">Left &gt; Right</td>
                </tr>
                <tr style="background: #FAFAFA;">
                    <td><strong>Axial Diffusivity (AD)</strong> (√ó10‚Åª¬≥ mm¬≤/s)</td>
                    <td style="text-align: center;">1.49</td>
                    <td style="text-align: center;">1.40</td>
                    <td style="text-align: center;" class="li-positive">+0.032</td>
                    <td style="text-align: center; font-size: 12px;">Balanced</td>
                </tr>
            </tbody>
        </table>

        <div class="li-legend">
            <span><span class="li-negative">‚ñ† Blue (Negative LI)</span> = Right &gt; Left</span>
            <span><span class="li-positive">‚ñ† Red (Positive LI)</span> = Left &gt; Right</span>
            <span style="color: #666;">|LI| &lt; 0.05 = Balanced | 0.05-0.10 = Borderline | &gt;0.10 = Notable
                Asymmetry</span>
        </div>
    </div>

    <!-- Tractography Visualizations -->
    <div class="section">
        <h2 class="section-title">üß† 3D Tractography Visualizations</h2>
        <div class="viz-grid">
            <div class="viz-item tractogram-large">
                <h3>Coronal View</h3>
                <div class="viz-placeholder">
                    [Larger coronal tractogram: 1200√ó450px]<br>
                    Blue = Left CST | Red = Right CST<br>
                    Shows bilateral symmetry and motor cortex distribution
                </div>
            </div>

            <div class="viz-item">
                <h3>Sagittal View</h3>
                <div class="viz-placeholder">
                    [Sagittal tractogram: 580√ó350px]<br>
                    Shows superior-inferior trajectory
                </div>
            </div>

            <div class="viz-item">
                <h3>Axial View</h3>
                <div class="viz-placeholder">
                    [Axial tractogram: 580√ó350px]<br>
                    Overlaid on FA map
                </div>
            </div>
        </div>
    </div>

    <!-- Along-Tract Profiles -->
    <div class="section">
        <h2 class="section-title">üìä Along-Tract Diffusion Profiles</h2>
        <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
            Profiles show metric variation from pontine level (0%) through internal capsule (50%) to precentral gyrus
            (100%).
            Shaded regions indicate ¬±1 standard deviation.
        </p>
        <div class="profile-plots">
            <div class="profile-plot">
                <h4>Fractional Anisotropy Along Tract</h4>
                <div class="plot-placeholder">
                    [FA profile: larger plot with confidence bands]<br>
                    X-axis: 0% (Pons) ‚Üí 50% (PLIC) ‚Üí 100% (Motor Cortex)<br>
                    Y-axis: FA value<br>
                    Blue line + shading = Left CST ¬± SD<br>
                    Red line + shading = Right CST ¬± SD
                </div>
            </div>

            <div class="profile-plot">
                <h4>Mean Diffusivity Along Tract</h4>
                <div class="plot-placeholder">
                    [MD profile with confidence bands]<br>
                    Typical U-shaped profile<br>
                    Lower in PLIC (high myelination)
                </div>
            </div>

            <div class="profile-plot">
                <h4>Radial Diffusivity Along Tract</h4>
                <div class="plot-placeholder">
                    [RD profile with confidence bands]<br>
                    Mirrors MD pattern<br>
                    Sensitive to myelin integrity
                </div>
            </div>

            <div class="profile-plot">
                <h4>Axial Diffusivity Along Tract</h4>
                <div class="plot-placeholder">
                    [AD profile with confidence bands]<br>
                    Reflects axonal integrity<br>
                    More stable along tract
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <strong>Generated by csttool v0.1.0</strong> |
        Processing Date: 2026-01-16 14:32:18 UTC |
        Method: Deterministic tractography with DTI model<br>
        <em>This report is for research purposes. Clinical decisions should be made by qualified medical
            professionals.</em>
    </div>
</body>

</html>